<div class="container">
  <div class="card mb-4">
    <div class="card-header">Collection Details</div>
    <div class="card-body">
      <div class="form-group">
        <strong>{{ collection.title }}</strong>
      </div>
      <div class="form-group">{{ collection.description }}</div>
      <div class="badge badge-warning mr-1">
        {{ collection.isPrivate ? "Private" : "Public" }} Collection
      </div>
      <div class="badge badge-info mr-1">
        There are {{ collection.cardsCount }} cards in this collection.
      </div>
      <div class="badge badge-success" *ngIf="collection.inReadCount === 1">
        One person is reading this.
      </div>
      <div class="badge badge-success" *ngIf="collection.inReadCount > 1">
        {{ collection.inReadCount }} people are reading this.
      </div>
      <div class="badge badge-success" *ngIf="collection.inReadCount === 0">
        Be the first one who reads it.
      </div>
    </div>
  </div>
  <h4>Add New Card</h4>
  <hr />
  <form [formGroup]="cardForm" (ngSubmit)="save()">
    <div class="form-group">
      <label for="question">Question</label>
      <textarea
        id="question"
        rows="4"
        cols="50"
        [ngClass]="{
          'is-invalid':
            cardForm.get('question').errors && cardForm.get('question').touched
        }"
        class="form-control"
        formControlName="question"
        placeholder="Question"
      ></textarea>
      <div class="invalid-feedback">The Question field is required.</div>
      <div
        class="invalid-feedback"
        *ngIf="
          cardForm.get('question').hasError('maxlength') &&
          cardForm.get('question').touched
        "
      >
        Question length must be less than 2000 characters
      </div>
    </div>
    <!--end of form-group-->
    <div class="form-group">
      <label for="answer">Answer</label>
      <textarea
        rows="4"
        cols="50"
        [ngClass]="{
          'is-invalid':
            cardForm.get('answer').errors && cardForm.get('answer').touched
        }"
        class="form-control"
        formControlName="answer"
        placeholder="Answer"
      ></textarea>
      <div class="invalid-feedback">The Answer field is required.</div>
      <div
        class="invalid-feedback"
        *ngIf="
          cardForm.get('answer').hasError('maxlength') &&
          cardForm.get('answer').touched
        "
      >
        Answer length must be less than 2000 characters
      </div>
    </div>
    <!--end of form-group-->
    <div class="form-group">
      <label for="example">Example</label>
      <textarea
        rows="4"
        cols="50"
        [ngClass]="{
          'is-invalid':
            cardForm.get('example').errors && cardForm.get('example').touched
        }"
        class="form-control"
        formControlName="example"
        placeholder="Example"
      ></textarea>
      <div
        class="invalid-feedback"
        *ngIf="
          cardForm.get('example').hasError('maxlength') &&
          cardForm.get('example').touched
        "
      >
        Example length must be less than 2000 characters
      </div>
    </div>
    <div class="form-group text-center">
      <button
        class="btn btn-success"
        [disabled]="!cardForm.dirty || !cardForm.valid"
        type="submit"
      >
        Add
      </button>
      <button class="btn btn-default" type="button" (click)="cancel()">
        Back to Collections
      </button>
    </div>
  </form>
</div>
